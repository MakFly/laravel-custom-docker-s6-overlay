#!/command/with-contenv bash

# Couleurs ANSI
GREEN='\033[0;32m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

echo -e "${BLUE}üöÄ D√©marrage du serveur FrankenPHP...${NC}"

# D√©finir le r√©pertoire de travail
cd /app

# V√©rifier la configuration Caddy
if [ ! -f /etc/caddy/Caddyfile ]; then
    echo -e "${RED}‚ùå Fichier Caddyfile manquant${NC}"
    exit 1
fi

# Variables d'environnement pour FrankenPHP
export PYTHONUNBUFFERED=1
export FRANKENPHP_CONFIG=/etc/caddy/Caddyfile

echo -e "${GREEN}‚úÖ Configuration FrankenPHP charg√©e${NC}"
echo -e "${BLUE}üìÅ R√©pertoire de travail : $(pwd)${NC}"
echo -e "${BLUE}‚öôÔ∏è  Fichier de configuration : $FRANKENPHP_CONFIG${NC}"

# Lancer FrankenPHP
exec /usr/local/bin/frankenphp run --config /etc/caddy/Caddyfile